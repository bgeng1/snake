(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var p=Object.defineProperty,g=(o,t,e)=>t in o?p(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,n=(o,t,e)=>(g(o,typeof t!="symbol"?t+"":t,e),e);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class f{constructor(t,e){n(this,"direction","right"),n(this,"ctx"),n(this,"headNode",{x:500,y:500}),n(this,"body",[this.headNode]),n(this,"width",25),n(this,"speed",this.width),n(this,"canvasHeight"),n(this,"canvasWidth"),n(this,"fruitX",400),n(this,"fruitY",400),n(this,"interval"),n(this,"score",0);const r=t.getContext("2d");if(!r)throw Error("snake class error: cant get canvas context");this.canvasHeight=t.height,this.canvasWidth=t.width,this.ctx=r,this.interval=e}draw(){for(const t of this.body)this.ctx.fillStyle="rgb(0, 150, 0)",this.ctx.fillRect(t.x,t.y,this.width,this.width);this.ctx.fillStyle="rgb(255, 210, 0)",this.ctx.fillRect(this.fruitX,this.fruitY,this.width,this.width)}update(){let t=this.body[0];switch(this.direction){case"up":t.y-=this.speed;break;case"down":t.y+=this.speed;break;case"left":t.x-=this.speed;break;case"right":t.x+=this.speed;break}var e=this.body.pop();e.x=t.x,e.y=t.y,this.body.unshift(e)}detectCollisions(){const t=this.body[0];(t.x>=this.canvasWidth||t.y>=this.canvasHeight||t.x<=-1||t.y<=-1)&&this.gameOver();for(let e=2;e<this.body.length;e++)this.detectEntityCollisions({x:t.x,y:t.y,w:this.width,h:this.width},{x:this.body[e].x,y:this.body[e].y,w:this.width,h:this.width})&&this.gameOver();this.detectEntityCollisions({x:t.x,y:t.y,w:this.width,h:this.width},{x:this.fruitX,y:this.fruitY,w:this.width,h:this.width})&&(this.generateFruit(),this.body.push({x:t.x,y:t.y}),this.score+=10)}gameOver(){clearInterval(this.interval),this.ctx.fillStyle="red",this.ctx.font="48px georgia",this.ctx.fillText(`Game Over. Score: ${this.score}`,250,150),this.ctx.font="35px georgia",this.ctx.fillText("space bar to restart",320,350)}setDirection(t){t==="down"&&this.direction!=="up"&&(this.direction="down"),t==="up"&&this.direction!=="down"&&(this.direction="up"),t==="right"&&this.direction!=="left"&&(this.direction="right"),t==="left"&&this.direction!=="right"&&(this.direction="left")}generateFruit(){const t=this.canvasHeight/this.width,e=this.canvasWidth/this.width;this.fruitX=Math.floor(Math.random()*(e-1))*this.width,this.fruitY=Math.floor(Math.random()*(t-1))*this.width}detectEntityCollisions(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.h+t.y>e.y}}const u=1e3,y=1e3;let d;const c=document.querySelector("canvas");if(!c)throw Error("cant find html canvas element");window.addEventListener("keydown",o=>{const{key:t}=o;t==="ArrowUp"&&h.setDirection("up"),t==="ArrowDown"&&h.setDirection("down"),t==="ArrowLeft"&&h.setDirection("left"),t==="ArrowRight"&&h.setDirection("right"),t===" "&&(clearInterval(d),d=setInterval(()=>{w()},100),h=new f(c,d))});const a=c.getContext("2d");c.width=y;c.height=u;d=setInterval(()=>{w()},100);let h=new f(c,d);const w=()=>{a&&(a.clearRect(0,0,y,u),h.update(),h.draw(),h.detectCollisions())};
